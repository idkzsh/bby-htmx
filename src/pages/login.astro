---
// login component - needs to be a page route in order for HTMX to swap

const { cookies, redirect } = Astro;

const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");

if (accessToken && refreshToken) {
  return redirect("/dashboard");
}
export const partial = true;
---

<div class="flex flex-col w-full items-center gap-4">
  <h1>Vendor Sign-on</h1>
  <div class="flex flex-col w-full items-center gap-2">
    <form
      action="/api/auth/signin"
      method="post"
      class="flex justify-evenly w-72 h-auto p-4 border rounded-md flex-col relative shadow-lg gap-2"
    >
      <label for="email" for="email">Email</label>
      <input
        type="email"
        name="email"
        id="email"
        class="bg-headerbg w-full py-2 px-4 pr-8 rounded-md"
        required
      />
      <label for="password">Password</label>
      <input
        type="password"
        name="password"
        id="password"
        class="bg-headerbg w-full py-2 px-4 pr-8 rounded-md"
        required
      />
      <button type="submit" class="btn">Login</button>
    </form>
    <span class="text-xs w-full text-center"
      >Don't have an account? <span
        hx-get="/register"
        hx-swap="innerHTML transition:true"
        hx-target="#main"
        class="cursor-pointer"
        ><u>Register</u></span
      ></span
    >
  </div>
</div>
